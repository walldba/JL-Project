<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        jQuery.support.cors = true;

        $(document).ready(function () {
            // chamar api via post
            $.ajax({
                url: "https://www.infomoney.com.br/webservices/services.asmx/GetStockSearchData?hash=cfcd208495d565ef66e7dff9f98764da",
                type: "POST",
                crossDomain: true,
                // This is the important part
                xhrFields: {
                    withCredentials: true
                },
                // This is the important part
                data: {
                    "sEcho": 4, "iDisplayStart": 0, "iDisplayLength": 10000,"iSortCol_0": 1, "sSortDir_0": "asc", "sSearch": "","TypeBind": "cot", "MarketID": "0", "SectorID": "0"
                },
                success: function (response) {
                    // handle the response
                    alert("Data Loaded: " + data);
                },
                error: function (xhr, status) {
                    // handle errors
                }
            });

            //var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
            //xmlhttp.open("POST", "https://www.infomoney.com.br/webservices/services.asmx/GetStockSearchData?hash=cfcd208495d565ef66e7dff9f98764da");
            //xmlhttp.setRequestHeader("Content-Type", "application/json");
            //xmlhttp.setRequestHeader("Access-Control-Allow-Origin", "*");
            //xmlhttp.withCredentials = true;
            //xmlhttp.send({
            //    "sEcho": 4, "iDisplayStart": 0, "iDisplayLength": 10000, "iSortCol_0": 1, "sSortDir_0": "asc", "sSearch": "", "TypeBind": "cot", "MarketID": "0", "SectorID": "0"
            //});
            
            $.post("https://www.infomoney.com.br/webservices/services.asmx/GetStockSearchData?hash=cfcd208495d565ef66e7dff9f98764da",
                {
                    "sEcho": 4, "iDisplayStart": 0, "iDisplayLength": 10000,"iSortCol_0": 1, "sSortDir_0": "asc", "sSearch": "","TypeBind": "cot", "MarketID": "0", "SectorID": "0"
                })
                .done(function (data) {
                    alert("Data Loaded: " + data);
            });
        });
    </script>
</head>
<body>
    <table>
        <thead>
            <tr>
                <td>Nome ação</td>
                <td>Código Ação</td>
                <td>Data</td>
                <td>Valor atual</td>
                <td>Variacão dia %</td>
                <td>Variacão Semana %</td>
                <td>Variacão Mensal %</td>
                <td>Variacão Ano %</td>
            </tr>
        </thead>
        <tbody id="corpoAPIAcoes"></tbody>
    </table>
</body>
</html>
